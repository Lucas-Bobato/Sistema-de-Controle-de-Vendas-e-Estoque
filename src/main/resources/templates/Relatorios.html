<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relat√≥rios - Sistema de Vendas</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="/styles/form.css">
</head>
<body>
    <div class="dashboard-layout">
        <div th:replace="~{fragments/sidebar :: sidebar-layout}"></div>

        <main class="main-content">
            <header class="main-header">
                <h1>Central de Relat√≥rios</h1>
                <div th:replace="~{fragments/user-profile :: header-profile}"></div>
            </header>

            <section class="content-section" th:if="${tipoRelatorio == null}">
                <h2>Selecionar Tipo de Relat√≥rio</h2>
                <div class="report-cards-grid">
                    <a th:href="@{/relatorios/vendas-por-periodo}" class="report-card">
                        <div class="icon-placeholder">üìÖ</div>
                        <h3>Vendas por Per√≠odo</h3>
                    </a>
                    <a th:href="@{/relatorios/produtos-mais-vendidos}" class="report-card">
                        <div class="icon-placeholder">üèÜ</div>
                        <h3>Produtos Mais Vendidos</h3>
                    </a>
                    <a th:href="@{/relatorios/estoque-critico}" class="report-card">
                        <div class="icon-placeholder">‚ùó</div>
                        <h3>Estoque Cr√≠tico</h3>
                    </a>
                    <a th:href="@{/relatorios/rentabilidade-produtos}" class="report-card">
                        <div class="icon-placeholder">üí∞</div>
                        <h3>Rentabilidade por Produto</h3>
                    </a>
                </div>
            </section>

            <section class="content-section" th:if="${tipoRelatorio != null}">
                <a th:href="@{/relatorios}" style="text-decoration: none; margin-bottom: 20px; display: inline-block;">&larr; Voltar para sele√ß√£o</a>
                <h2 th:text="'Relat√≥rio: ' + ${tipoRelatorio}">T√≠tulo do Relat√≥rio</h2>

                <form th:if="${tipoRelatorio == 'Vendas por Per√≠odo'}" th:action="@{/relatorios/vendas-por-periodo}" method="get" class="form-grid" style="grid-template-columns: 1fr 1fr auto; align-items: end;">
                    <div class="form-group">
                        <label for="dataInicio">Data de In√≠cio:</label>
                        <input type="date" id="dataInicio" name="dataInicio" class="search-input" required>
                    </div>
                    <div class="form-group">
                        <label for="dataFim">Data Final:</label>
                        <input type="date" id="dataFim" name="dataFim" class="search-input" required>
                    </div>
                    <button type="submit" class="action-button">Gerar</button>
                </form>

                <div class="table-container" th:if="${resultados != null}">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th th:each="coluna : ${colunas}" th:text="${coluna}">Cabe√ßalho</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="linha : ${resultados}">
                                <td th:each="dado : ${linha}" th:text="${dado}">Dado</td>
                            </tr>
                            <tr th:if="${#lists.isEmpty(resultados)}">
                                <td th:colspan="${#lists.size(colunas)}" style="text-align: center;">Nenhum resultado encontrado.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div th:if="${resultados == null and tipoRelatorio == 'Vendas por Per√≠odo'}" style="text-align: center; padding: 20px; background-color: #f8f9fa; border-radius: 8px;">
                    <p>Por favor, selecione um per√≠odo para gerar o relat√≥rio.</p>
                </div>

            </section>
        </main>
    </div>
    <script src="/js/main.js"></script>
</body>
</html>